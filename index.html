<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Discord Embeds -->
    <meta content="Pause my music! - Alex ðŸ‘‹" property="og:title" />
    <meta content="Pause my music! Site contains crude words, don't come here if you don't like bad words" property="og:description" />
    <meta content="https://pause.thatalex.dev" property="og:url" />
    <meta content="https://thatalex.dev/static/img/services/spotify-logo.png" property="og:image" />
    <meta content="#000f54" data-react-helmet="true" name="theme-color" />

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://pause.thatalex.dev/static/css/modal.css">
    <link rel="stylesheet" href="https://pause.thatalex.dev/static/css/buttonStyling.css">
    <title>Pause! > Alex ðŸ‘‹</title>
</head>
<body>
    <h1>Pause!</h1>
    <p style="font-size:15px;"><a href="https://github.com/awexthedev/pause" target="_blank">Source Code on Github</a></p>
    <p style ="font-size:30px;">Ever wanted to fuck with someones music? Well, now you can fuck with mine!<br>I'm paying for this premium plan, and in turn, this gives me access to premium API routes to control my player.<br>
    This will be harshly rate limited, because I like listening to my music sometimes.</p>

        <hr width="80">

    <div id="content">
        <div id="content">
            <img width="250" id="artistCover"><br><a id="songUrl" target="_blank"><h3 id="songData"></h3></a><p id="volume"></p>
        </div>
        <hr width="50">
        <i id="backward" onclick="skipToPrev()" class="fa fa-step-backward" style="font-size:25px; padding-right:10px;" aria-hidden="true"></i> 
        <i id="playPause" onclick="pauseSong()" class="fa fa-pause" style="font-size:25px;" aria-hidden="true"></i> 
        <i id="forward" onclick="skipSong()" class="fa fa-step-forward" style="font-size:25px; padding-left:10px;" aria-hidden="true"></i><br><br>

        <input type="number" style="width:20%; color:black;" id="volumeContent" placeholder="Change volume? (0-100)"><br>
        <input type="text" style="width:20%; color:black;" id="messageContent" placeholder="Attach a message w/ your action!"><br>
        <p><a style="color:white;" onclick="openQueueModal()" href="#">Queue a song</a></p>
        <hr width="50">
        <span style="font-size:20px;" id="noti"></span>
    </div>

    <div id="modal" class="modal">
        <div class="modal-content">
          <span class="close">&times;</span><br>
    
        <div style="text-align:center;">
            <h3>Add a song to the queue!</h3>
            <p style="color:maroon;">Please use a Spotify Track URL! URIs are no longer supported.</p>
            <input type="text" style="color:black;" id="uri" placeholder="Spotify Track URL"><br>
            <input type="text" style="color:black;" id="qMessage" placeholder="Attach a message!"><br>
          <button type="button" onclick="qASong()">Submit</button><br><br>
    
          <div id="modalNoti"></div>
        </div>
        </div>
      
      </div>

      <p>Content is loaded from Spotify. All Rights Reserved to respective artists/labels.</p>

    <script src="https://pause.thatalex.dev/static/js/popup.js"></script>
    <script src="https://pause.thatalex.dev/static/js/queue.js"></script>
    <script src="https://pause.thatalex.dev/static/js/playerControls.js"></script>
    <script src="https://pause.thatalex.dev/static/js/electron.js"></script>
    <script src="https://pause.thatalex.dev/static/js/checkTime.js"></script>
    <script src="https://pause.thatalex.dev/static/js/volume.js"></script>
    <script>
        async function checkCookie() {
            if(document.cookie) {
                const cookie = document.cookie.split('; ').find(row => row.startsWith('lastRan=')).split('=')[1];
                const time = await checkTime(cookie);
                console.log(time)
                if(time) return true;
                else return false;
            } else return true;
        }

        const data = fetch("https://api.thatalex.dev/v0/web/spotify/state").then(async function(response) {
            const data = await response.json();
            console.log(`Received API State Response`, data)
            if(data.status != 401) {
                if(data.type == "published") {
                    document.getElementById("artistCover").src = `${data.data.songData.album.images[0].url}`;
                    document.getElementById("songUrl").href = `${data.data.songData.url}`;
                } else if (data.type == "local") {
                    document.getElementById("artistCover").src = `https://thatalex.dev/static/img/services/spotify-logo.png`;
                    document.getElementById("songUrl").href = `https://youtube.com/results?search_query=${data.data.songData.songName.replace(" ", "+")}+by+${data.data.songData.artists[0].name.replace(" ", "+")}`
                }
                if(data.playing == false) {
                    document.getElementById("playPause").className = `fa fa-play`;
                    document.getElementById("playPause").onclick = playSong
                }
                document.getElementById("songData").innerText = `${data.data.songData.songName} by ${data.data.songData.artists[0].name}`;
                document.getElementById("volume").innerText = `Playing at ${data.data.device.volume}% volume`;
            }
            else { 
                console.log(`Uh oh! A fucky wucky popped up! >:3`) 
                document.getElementById("contentString").innerHTML = `<p style="color:red; font-size:25px;">${data.message}</p>`; 
                document.getElementById("button").style.display = `none`; 
            }
        });
    </script>
</body>
</html>

<style>
    body {
        background-color: black;
        color:white;
        text-align:center;
    }

    button {
        color:black;
    }

    ul {
        list-style:none;
        text-align:center;
    }
</style>